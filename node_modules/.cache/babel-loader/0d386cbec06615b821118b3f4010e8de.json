{"ast":null,"code":"import _slicedToArray from \"D:\\\\Project\\\\banner\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport React from 'react';\n\nfunction create(fn) {\n  var state = {\n    listeners: [],\n    current: fn(function (merge) {\n      if (typeof merge === 'function') merge = merge(state.current);\n      state.current = Object.assign({}, state.current, merge);\n      state.listeners.forEach(function (listener) {\n        return listener(state.current);\n      });\n    }, function () {\n      return state.current;\n    })\n  };\n  return [// useStore\n  function (selector, dependencies) {\n    var selected = selector ? selector(state.current) : state.current; // Using functional initial b/c selected itself could be a function\n\n    var _React$useState = React.useState(function () {\n      return selected;\n    }),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        slice = _React$useState2[0],\n        set = _React$useState2[1];\n\n    var sliceRef = React.useRef();\n    React.useEffect(function () {\n      return void (sliceRef.current = slice);\n    }, [slice]);\n    React.useEffect(function () {\n      var ping = function ping() {\n        // Get fresh selected state\n        var selected = selector ? selector(state.current) : state.current; // Refresh local slice, functional initial b/c selected itself could be a function\n\n        if (!shallowEqual(sliceRef.current, selected)) set(function () {\n          return selected;\n        });\n      };\n\n      state.listeners.push(ping);\n      return function () {\n        return state.listeners = state.listeners.filter(function (i) {\n          return i !== ping;\n        });\n      };\n    }, dependencies || [selector]); // Returning the selected state slice\n\n    return selected;\n  }, {\n    subscribe: function subscribe(fn) {\n      state.listeners.push(fn);\n      return function () {\n        return state.listeners = state.listeners.filter(function (i) {\n          return i !== fn;\n        });\n      };\n    },\n    getState: function getState() {\n      return state.current;\n    },\n    destroy: function destroy() {\n      return state.listeners = [], state.current = {};\n    }\n  }];\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty;\n\nfunction is(x, y) {\n  if (x === y) {\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\n\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  for (var i = 0; i < keysA.length; i++) {\n    if (!hasOwn.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default create;","map":null,"metadata":{},"sourceType":"module"}